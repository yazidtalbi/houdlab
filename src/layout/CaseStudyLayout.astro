---
import "../styles/global.css";

type Tag = { label: string };
type Fact = { label: string; value: string };
type KPI = { label: string; value: string };
type Testimonial = { quote: string; name: string; role: string; avatar?: string };

interface Props {
  // hero
  title: string;
  subtitle?: string;
  heroImage?: string;
  tags?: Tag[];
  facts?: Fact[];

  // toggles
  showOverview?: boolean;         // default true
  showMosaic?: boolean;           // default true
  showChallenge?: boolean;        // default true
  showProcess?: boolean;          // default true
  showAlternatives?: boolean;     // default false (“Two creative takes…”)
  showSolutionGrid?: boolean;     // default true
  showResults?: boolean;          // default true
  showBigShowcase?: boolean;      // default true
  showCTA?: boolean;              // default true

  // results
  testimonial?: Testimonial;
  kpis?: KPI[];
}

const {
  title,
  subtitle = "",
  heroImage = "",
  tags = [],
  facts = [],

  showOverview = true,
  showMosaic = true,
  showChallenge = true,
  showProcess = true,
  showAlternatives = false,
  showSolutionGrid = true,
  showResults = true,
  showBigShowcase = true,
  showCTA = true,

  testimonial,
  kpis = [],
} = Astro.props as Props;
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title} — Houd Lab</title>
  </head>
  <body class="bg-white text-neutral-900 antialiased">
    <main class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">

      <!-- HERO -->
      <section class="relative grid grid-cols-12 gap-6 lg:gap-10 py-10 lg:py-14">
        <div class="col-span-12 lg:col-span-7 flex flex-col gap-6">
          <div>
            <a href="/projects" class="text-sm text-neutral-500 hover:text-neutral-800">← Projects</a>
          </div>
          <h1 class="text-4xl/tight sm:text-5xl lg:text-6xl font-extrabold tracking-tight">
            {title}
          </h1>
          {subtitle && <p class="text-lg text-neutral-600 max-w-prose">{subtitle}</p>}

          {tags.length > 0 && (
            <div class="flex flex-wrap gap-2">
              {tags.map((tag: Tag) => (
                <span class="inline-flex items-center rounded-full border border-neutral-200 bg-white px-3 py-1 text-sm font-medium shadow-sm">
                  {tag.label}
                </span>
              ))}
            </div>
          )}

          {facts.length > 0 && (
            <div class="grid grid-cols-2 gap-3 sm:grid-cols-4">
              {facts.map((fact: Fact) => (
                <div class="rounded-xl2 border border-neutral-200 bg-white p-4 shadow-card">
                  <div class="text-xs uppercase tracking-wide text-neutral-500">{fact.label}</div>
                  <div class="mt-1 text-base font-semibold">{fact.value}</div>
                </div>
              ))}
            </div>
          )}
        </div>

        <div class="col-span-12 lg:col-span-5">
          <div class="relative h-72 sm:h-96 lg:h-[28rem] rounded-xl3 overflow-hidden shadow-card">
            {heroImage
              ? <img src={heroImage} alt="" class="h-full w-full object-cover" />
              : <div class="h-full w-full bg-neutral-100" />}
            <!-- Arabic accent -->
            <div class="pointer-events-none absolute right-6 top-6 h-44 w-44 text-neutral-900/10">
              <slot name="arabic-accent" />
            </div>
          </div>
        </div>
      </section>

      {showOverview && (
        <section class="py-6 lg:py-10">
          <div class="grid grid-cols-12 gap-6 lg:gap-10 items-start">
            <div class="col-span-12 lg:col-span-7">
              <div class="prose prose-lg max-w-none prose-neutral">
                <slot name="overview" />
              </div>
            </div>
            <div class="col-span-12 lg:col-span-5">
              <div class="rounded-xl3 border border-neutral-200 bg-brand-sand p-6 shadow-card">
                <slot name="overview-side" />
              </div>
            </div>
          </div>
        </section>
      )}

      {showMosaic && (
        <section class="py-10 lg:py-14">
          <div class="rounded-xl3 border border-neutral-200 bg-white p-3 sm:p-4 shadow-card">
            <!-- Big mosaic grid -->
            <div class="grid gap-3 sm:grid-cols-4">
              <slot name="mosaic" />
            </div>
          </div>
        </section>
      )}

      {showChallenge && (
        <section class="relative py-10 lg:py-14">
          <div class="grid grid-cols-12 gap-6 lg:gap-10 items-start">
            <div class="col-span-12 lg:col-span-7">
              <h2 class="text-2xl sm:text-3xl font-bold mb-3">Challenge</h2>
              <div class="prose max-w-none prose-neutral">
                <slot name="challenge" />
              </div>
            </div>
            <div class="col-span-12 lg:col-span-5">
              <div class="rounded-xl2 border border-neutral-200 bg-white p-4 shadow-card">
                <slot name="challenge-aside" />
              </div>
            </div>
          </div>
          <!-- vertical calligraphy accent -->
          <div class="pointer-events-none absolute right-[-3rem] top-8 hidden lg:block rotate-12 text-neutral-900/10">
            <slot name="arabic-accent-vertical" />
          </div>
        </section>
      )}

      {showProcess && (
        <section class="py-10 lg:py-16">
          <div class="rounded-xl3 border border-neutral-200 bg-brand-beige p-6 sm:p-8 lg:p-10">
            <h2 class="text-center text-2xl sm:text-3xl font-bold">Our Process</h2>
            <p class="mt-2 text-center text-neutral-700 max-w-3xl mx-auto">
              With your vision and business goals at the forefront, we design lasting systems—
              beyond visuals—to deliver measurable impact.
            </p>

            <!-- Steps "chips" row -->
            <div class="mt-6 grid gap-3 sm:grid-cols-2 lg:grid-cols-5">
              <slot name="process-steps" />
            </div>

            <!-- Progress / timeline bar -->
            <div class="mt-6">
              <slot name="process-timeline" />
            </div>
          </div>
        </section>
      )}

      {showOverview && (
        <section class="py-10 lg:py-14">
          <div class="grid grid-cols-12 gap-6 lg:gap-10">
            <div class="col-span-12 lg:col-span-7">
              <h2 class="text-2xl sm:text-3xl font-bold">All-in-One Solution…</h2>
              <div class="mt-4 prose max-w-none prose-neutral">
                <slot name="copy-block" />
              </div>
            </div>
            <div class="col-span-12 lg:col-span-5">
              <div class="rounded-xl2 border border-neutral-200 bg-white p-4 shadow-card">
                <slot name="copy-block-card" />
              </div>
            </div>
          </div>
        </section>
      )}

      {showAlternatives && (
        <section class="py-8 lg:py-12">
          <h3 class="text-xl sm:text-2xl font-semibold">Two creative takes on the industry</h3>
          <div class="mt-4 grid gap-4 lg:grid-cols-3">
            <div class="lg:col-span-2">
              <div class="space-y-4">
                <slot name="alternatives-list" />
              </div>
            </div>
            <div>
              <div class="rounded-xl2 border border-neutral-200 bg-white p-4 shadow-card">
                <slot name="alternatives-card" />
              </div>
            </div>
          </div>
        </section>
      )}

      {showSolutionGrid && (
        <section class="py-8 lg:py-12">
          <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
            <slot name="solution-grid" />
          </div>
        </section>
      )}

      {showResults && (
        <section class="py-10 lg:py-14">
          <h2 class="text-2xl sm:text-3xl font-bold">Results</h2>
          <div class="mt-6 grid gap-6 sm:grid-cols-3">
            <slot name="results-cards" />
          </div>

          {testimonial && (
            <div class="mt-8 rounded-xl2 border border-neutral-200 bg-white p-6 shadow-card">
              <p class="text-lg italic">“{testimonial.quote}”</p>
              <div class="mt-4 flex items-center gap-3">
                {testimonial.avatar
                  ? <img src={testimonial.avatar} class="h-10 w-10 rounded-full object-cover" alt="" />
                  : <div class="h-10 w-10 rounded-full bg-neutral-200" />}
                <div>
                  <div class="font-semibold">{testimonial.name}</div>
                  <div class="text-sm text-neutral-500">{testimonial.role}</div>
                </div>
              </div>
            </div>
          )}
        </section>
      )}

      {showBigShowcase && (
        <section class="py-6 lg:py-10">
          <div class="grid gap-6 sm:grid-cols-2">
            <slot name="big-showcase" />
          </div>
        </section>
      )}

      {showCTA && (
        <section class="py-12 lg:py-16">
          <div class="rounded-xl3 border border-neutral-200 bg-neutral-50 p-8 text-center shadow-card">
            <h2 class="text-2xl sm:text-3xl font-bold">Ready to start?</h2>
            <p class="mt-2 text-neutral-600">Chat with an expert & get your scope in minutes.</p>
            <a href="/#chat-section"
              class="mt-6 inline-flex items-center gap-2 rounded-full bg-neutral-900 px-6 py-3 text-white shadow hover:opacity-90 transition">
              Start Your Project
              <span aria-hidden>→</span>
            </a>
          </div>
        </section>
      )}

    </main>
  </body>
</html>
