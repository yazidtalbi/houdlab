---
import "../styles/global.css";
import VideoReel from "../components/VideoReel";
import ChatCrisp from "../components/ChatCrisp.astro";
import TestimonialsMarquee from "../components/TestimonialsMarquee";
import ChatPanel from "../components/ChatPanel";
import GlobeBackground from "../components/GlobeBackground";
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Houd Lab â€” Establishing Brands & Products</title>
    <meta
      name="description"
      content="Chat with a design expert and get your project scope in minutes."
    />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- OG / Twitter -->
    <meta property="og:type" content="website" />
    <meta
      property="og:title"
      content="Houd Lab â€” Establishing Brands & Products"
    />
    <meta
      property="og:description"
      content="Chat with a design expert and get your project scope in minutes."
    />
    <meta property="og:image" content="/og.jpg" />
    <meta name="twitter:card" content="summary_large_image" />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter+Display:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
  </head>

  <body class="bg-[#FFFFFF] text-neutral-900 font-display">
    <!-- soft page bg -->
    <div
      class="absolute inset-0 -z-10 bg-[radial-gradient(1200px_600px_at_10%_-10%,rgba(255,224,130,0.06),transparent_60%)]"
    >
    </div>

    <main class="container mx-auto px-4 py-12">
      <!-- Make the section relative so the globe can be absolutely positioned inside it -->
      <section class="relative grid grid-cols-12 gap-4 lg:gap-8 items-start">
        <!-- Arabic HoudLab SVG (behind globe but above background) -->
        <div
          class="absolute -left-[3vw] top-[30vh] w-[160vmin] opacity-100 z-0 pointer-events-none overflow-visible"
        >
          <img src="/houd.svg" alt="HoudLab Arabic" class="w-full h-auto" />
        </div>

        <!-- ðŸŒ Globe sits behind the content -->

        <!-- Soft radial fade + optional blue highlight arc over the globe -->
        <div
          class="pointer-events-none absolute -z-5 left-[10vw] top-[35vh] w-[95vmin] h-[95vmin]"
        >
          <!-- 1) Soft white radial fade (makes the globe blend into the background) -->
          <div
            class="absolute inset-0 rounded-full opacity-70 blur-2xl
			 bg-[#FFFFFF]"
          >
          </div>

          <!-- 2) Optional colored arc (subtle blue sweep) -->
          <div
            class="absolute inset-0 rounded-full blur-xl opacity-50
			 bg-[#FFFFFF]"
          >
          </div>
        </div>

        <GlobeBackground client:load />

        <!-- 1) Empty column (2) â€” shows background -->
        <div class="col-span-2 hidden xl:block"></div>

        <!-- 2) Chat column (7) -->
        <div
          class="col-span-12 lg:col-span-8 xl:col-span-7 z-10"
          id="chat-section"
        >
          <ChatPanel client:load />
        </div>

        <!-- 3) Video + description column (3) -->
        <aside
          class="col-span-12 lg:col-span-4 xl:col-span-3 flex flex-col gap-4 z-10"
        >
          <!-- Description -->
          <div class="order-2 lg:order-1 mt-5 md:mt-5 lg:mt-10 mb-5">
            <p
              class="text-neutral-800 max-w-prose font-display leading-tight md:leading-snug font-semibold lg:text-base text-xl"
            >
              Weâ€™re a Tech & Design agency, <br class="hidden lg:block" />based
              in Casablanca, Morocco. <br class="hidden lg:block" />
              We focus on delivering Design and <br class="hidden lg:block" /> Frontend
              Development Services.
            </p>
            <a
              href="/"
              aria-label=" DISCOVER MORE"
              class="group inline-flex items-center select-none mt-6"
            >
              <!-- Left icon -->
              <span
                class="grid place-items-center flex-none w-9 h-9
			  rounded-full bg-neutral-900 text-white
			  transition-all duration-300 ease-out
			  group-hover:w-0 group-hover:h-0"
              >
                <svg
                  viewBox="0 0 24 24"
                  class="w-4 h-4 transition-transform duration-300 ease-out group-hover:scale-0"
                  fill="none"
                  stroke="white"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <path d="M5 12h14M12 5l7 7-7 7"></path>
                </svg>
              </span>

              <!-- Pill button text -->
              <span
                class="relative rounded-full bg-[#FABC4B] text-neutral-900 text-sm
			  px-4 md:px-6 py-2.5 font-semibold tracking-wide
			  transition-transform duration-300 ease-out
			  group-hover:-translate-x-2 -mr-2"
              >
                DISCOVER MORE
              </span>

              <!-- Right icon -->
              <span
                class="grid place-items-center flex-none w-0 h-0
			  rounded-full bg-neutral-900 text-white
			  transition-all duration-300 ease-out
			  group-hover:w-9 group-hover:h-9"
              >
                <svg
                  viewBox="0 0 24 24"
                  class="w-4 h-4 scale-0 transition-transform duration-300 ease-out group-hover:scale-100"
                  fill="none"
                  stroke="white"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <path d="M5 12h14M12 5l7 7-7 7"></path>
                </svg>
              </span>
            </a>
          </div>

          <!-- Video -->
          <div
            class="order-1 lg:order-2 aspect-video rounded-2xl overflow-hidden bg-neutral-200"
          >
            <video
              src="/reels/demo.mp4"
              autoplay
              muted
              loop
              playsinline
              class="w-full h-full object-cover"></video>
          </div>
        </aside>
      </section>
    </main>

    <!-- (optional) extra sections below -->
    <main class="max-w-4xl mx-auto p-4 md:p-4"></main>
    <!-- Testimonials header -->

    <div class="">
      <section class="flex items-center justify-center gap-6 mb-12 md:mb-16">
        <!-- Left laurel -->

        <img
          src="/king.svg"
          alt=""
          class="w-20 h-20 md:w-26 md:h-26 transform scale-x-[-1]"
        />
        <!-- Center text -->
        <div class="text-center">
          <h2 class="text-2xl md:text-3xl font-semibold mb-2">
            Best-Seller <br />Worldwide
          </h2>
          <p class="text-neutral-600">Clients are satisfied</p>
        </div>

        <!-- Right laurel (flipped horizontally) -->
        <img src="/king.svg" alt="" class="w-20 h-20 md:w-26 md:h-26" />
      </section>
      <TestimonialsMarquee client:load />
    </div>

    <!-- Footer Navigation -->
    <footer class="mt-16 md:mt-16 border-0 border-neutral-200 bg-white">
      <div
        class="max-w-7xl mx-auto flex flex-col md:flex-row justify-between gap-2 md:gap-6 py-8 items-start md:items-center px-8 md:px-0"
      >
        <!-- Left nav links -->
        <nav
          class="flex flex-col md:flex-row gap-4 md:gap-6 font-medium text-xl md:text-md items-start md:items-center"
        >
          <a href="/" class="px-4 py-2 rounded-full bg-neutral-900 text-white">
            Home
          </a>
          <a href="/about" class="hover:text-neutral-600 transition">About Us</a
          >
          <a href="/projects" class="hover:text-neutral-600 transition"
            >Projects</a
          >
          <a href="/services" class="hover:text-neutral-600 transition"
            >Services</a
          >
          <a href="/blog" class="hover:text-neutral-600 transition">Blog</a>
        </nav>

        <!-- Right CTA -->

        <button
          type="button"
          data-scroll-to-chat
          aria-label="Start your project"
          class="group inline-flex items-center select-none cursor-pointer mt-10 md:mt-0"
        >
          <!-- Left icon (shrinks away on hover) -->
          <span
            class="grid place-items-center flex-none w-11 h-11 md:w-9 md:h-9
				 rounded-full bg-neutral-900 text-white shadow
				 transition-all duration-300 ease-out
				 group-hover:w-0 group-hover:h-0"
          >
            <svg
              viewBox="0 0 24 24"
              class="w-4 h-4 transition-transform duration-300 ease-out group-hover:scale-0"
              fill="none"
              stroke="white"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M5 12h14M12 5l7 7-7 7"></path>
            </svg>
          </span>

          <!-- Pill button text -->
          <span
            class="relative rounded-full bg-[#FABC4B] text-neutral-900 text-lg md:text-sm
				 px-4 md:px-6 py-2.5 font-semibold tracking-wide
				 transition-transform duration-300 ease-out
				 group-hover:-translate-x-2 -mr-2"
          >
            START YOUR PROJECT
          </span>

          <!-- Right icon (grows in on hover) -->
          <span
            class="grid place-items-center flex-none w-0 h-0
				 rounded-full bg-neutral-900 text-white
				 transition-all duration-300 ease-out
				 group-hover:w-9 group-hover:h-9"
          >
            <svg
              viewBox="0 0 24 24"
              class="w-4 h-4 scale-0 transition-transform duration-300 ease-out group-hover:scale-100"
              fill="none"
              stroke="white"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M5 12h14M12 5l7 7-7 7"></path>
            </svg>
          </span>
        </button>
      </div>
    </footer>
  </body>
  <!-- Put this near the end of index.astro (before </body>) -->
  <script type="module">
    const btns = document.querySelectorAll("[data-scroll-to-chat]");
    const chatSection = document.getElementById("chat");
    const chatInput = document.getElementById("chat-input");

    function focusInputAfterScroll() {
      // Give the browser a tick to finish smooth scroll & layout
      setTimeout(() => {
        chatInput?.focus({ preventScroll: true });
      }, 450);
    }

    btns.forEach((btn) => {
      btn.addEventListener("click", (e) => {
        // If it's an anchor with #chat, default smooth behavior will run thanks to CSS.
        // We only ensure focus after.
        if (chatSection) {
          focusInputAfterScroll();
        }
      });
    });

    // Also handle direct #chat visits / hash changes
    if (location.hash === "#chat-section") focusInputAfterScroll();
    window.addEventListener("hashchange", () => {
      if (location.hash === "#chat-section") focusInputAfterScroll();
    });
  </script>

  <script type="module">
    const btn = document.querySelector("[data-scroll-to-chat]");
    const chatSection = document.getElementById("chat-section");
    const chatInput = document.getElementById("chat-input");

    btn?.addEventListener("click", () => {
      if (!chatSection) return;

      // Smooth scroll
      chatSection.scrollIntoView({ behavior: "smooth", block: "center" });

      // Focus input after scroll
      setTimeout(() => {
        chatInput?.focus({ preventScroll: true });
      }, 500); // adjust timing if needed
    });
  </script>
</html>
